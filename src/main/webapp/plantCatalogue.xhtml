<ui:composition xmlns="http://www.w3c.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/templates/main.xhtml">

    <ui:define name="head">
        <link rel="stylesheet" href="/webjars/font-awesome/6.4.0/css/all.min.css" />
    </ui:define>


    <ui:define name ="content">


        <!-- .........................................TABLE.............................................................. -->
        <h:form id="userForm">
            <div class="col-12">

                <div class="card">
                    <div style="display: flex; gap: 10px;">
                    <h5>Plant Catalogue</h5>
                        <!-- ....................Help button...........................BUTTON................................. -->

                        <p:commandButton type="button" icon="fa fa-duotone fa-seedling" title="Help"
                                         styleClass="ui-button-secondary outlined-button"
                                         onclick="PF('helpDialog').show()"/>
                    </div>
                    <p:dataTable id="plantsTable" var="plant" value="#{plantListController.notYetFollowedPlantsList}" paginator="true" rows="10" paginatorPosition="bottom" rowKey="#{plant.id}">


                        <p:column >
                            <p:graphicImage url="../resources/images/plant1.jpg" styleClass="shadow-2" width="100"/>
                        </p:column>

                        <p:column headerText="Plant" sortBy="#{plant.plantName}" filterBy="#{plant.plantName}">
                            <h:outputText value="#{plant.plantName}"/>
                        </p:column>

                        <p:column headerText="Location" sortBy="#{plant.sensorStation}" filterBy="#{plant.sensorStation}">
                            <h:outputText value="#{plant.sensorStation.location}"/>
                        </p:column>

                        <p:column headerText="Planted Date" sortBy="#{plant.plantedDate}" filterBy="#{plant.plantedDate}">
                            <h:outputText value="#{plant.plantedDate}"/>
                        </p:column>

                        <p:column headerText="Description" sortBy="#{plant.description}" filterBy="#{plant.description}">
                            <h:outputText value="#{plant.description}"/>
                        </p:column>

                        <p:column >

                            <!-- ....................FOLLOW PLANT BUTTON ........... .............. -->
                            <p:commandButton style="margin-left: 2px" icon="pi pi-plus"
                                            title="Follow Plant"
                                             update=":userForm:plantsTable"
                                            oncomplete="location.reload();">
                                <p:ajax event="click" listener="#{userDetailController.doAddPlantToFollowedPlants(plant)}"/>
                            </p:commandButton>


                        <!-- ....................PLANT DETAILS BUTTON ........... .............. -->

                            <p:button style="margin-left: 2px"
                                      icon="pi pi-search"
                                      title="Show Plant Page"
                                      href="/plantPage.xhtml?id=#{plant.plantID} "/>
                        </p:column>

                    </p:dataTable>
                </div>
            </div>

        </h:form>
        <p:dialog header="Plant Catalogue Help" id="helpDialog" widgetVar="helpDialog"
                  modal="true"
                  showEffect="fade" hideEffect="fade" resizable="false">
            <p:outputPanel id="plantCataloguePageHelp">
                <h6>Showing plant page:</h6>
                By clicking on the "Show Plant Page" button, you will get redirected to the selected plant page.
                <h6>Following a plant:</h6>
                By clicking on the "Follow Plant" button, it's possible to add the selected plant to the followed plants (showed in dashboard page). The followed plant will no longer be visible in the plant catalogue.
            </p:outputPanel>
        </p:dialog>



    </ui:define>
</ui:composition>
