<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui" xmlns:po="http://primefaces.org/rain" template="/WEB-INF/templates/main.xhtml">

    <ui:define name="title">Dashboard</ui:define>
    <ui:define name="head">
        <h:outputScript name="js/chart.js" />
        <script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=true"></script>
    </ui:define>






    <ui:define name="content">
        <div class="layout-dashboard">
            <div class="grid">


                <!-- ..........................................TOP INFO BOXES................................................................... -->
                <!-- .....................USERS SIGNED UP..................................... -->
                <div class="col-12 md:col-6 xl:col-3">
                    <div class="card  overview-box">
                        <p:graphicImage url="../resources/images/dashboard/effect-useronline.svg"/>
                        <span class="overview-icon">
                            <p:graphicImage url="../resources/images/dashboard/icon-usersonline.png"/>
                        </span>
                        <div class="overview">
                            <span class="overview-title">USERS SIGNED UP</span>
                            <h3>
                                <h:outputText value="#{userListController.usersAmount}" />
                            </h3>
                        </div>
                    </div>
                </div>
                <!-- .....................ACCESS POINTS..................................... -->
                <div class="col-12 md:col-6 xl:col-3">
                    <div class="card overview-box">
                        <p:graphicImage url="../resources/images/dashboard/effect-checkins.svg"/>
                        <span class="overview-icon">
                            <p:graphicImage url="../resources/images/dashboard/icon-checkins.png"/>
                        </span>
                        <div class="overview">
                            <span class="overview-title">ACCESS POINTS</span>
                            <h3>query this field</h3>
                        </div>
                    </div>
                </div>
                <!-- .....................PLANTS UNDER CARE..................................... -->
                <div class="col-12 md:col-6 xl:col-3">
                    <div class="card overview-box ">
                        <p:graphicImage url="../resources/images/dashboard/effect-filessynced.svg"/>
                        <span class="overview-icon">
                            <p:graphicImage url="../resources/images/dashboard/icon-filessynced.png"/>
                        </span>
                        <div class="overview">
                            <span class="overview-title">PLANTS UNDER CARE</span>
                            <h3>
                                <h:outputText value="#{sensorStationListController.sensorStationsAmount}" />
                            </h3>
                        </div>
                    </div>
                </div>
                <!-- .....................MEASUREMENTS..................................... -->
                <div class="col-12 md:col-6 xl:col-3">
                    <div class="card overview-box">
                        <p:graphicImage url="../resources/images/dashboard/effect-messages.svg" />
                        <span class="overview-icon">
                            <p:graphicImage url="../resources/images/dashboard/icon-messages.png"/>
                        </span>
                        <div class="overview">
                            <span class="overview-title">MEASUREMENTS</span>
                            <h3>
                                <h:outputText value="#{measurementListController.measurementsAmount}" />
                            </h3>
                        </div>
                    </div>
                </div>




                <!-- ..........................................GRAPH................................................................... -->
                <div class="col-12 md:col-12 xl:col-6">
                    <div class="card chart">
                        <div class="card-header">
                            <h5>Selected GreenHouse Details</h5>
                        </div>
                        <div class="card">
                            <p:barChart id="myBarChart" model="#{graphController.barModel}" />

                        </div>
                    </div>
                </div>
                <!-- ...................simply modify the graph controller do display different data................... -->
                <!-- ...................supported charts are .lineModel and .cartesianLinearModel................... -->





                <!-- ..........................................GREENHOUSES PREVIEW................................................................... -->
                <div class="col-12 md:col-12 xl:col-6">
                    <div class="col-12">
                        <div class="card">
                            <h5>Green Houses</h5>
                            <p:dataTable id="ordersTable" var="sensorStation" value="#{sensorStationListController.sensorStations}" selectionMode="single" reflow="true" paginatorPosition="bottom"
                                         rowKey="#{sensorStation.id}" paginator="true" rows="5" sortBy="#{sensorStation.id}" sortOrder="descending" >
                                <p:ajax event="rowSelect" update="myBarChart" listener="#{graphController.onRowSelect}" />
                                <p:column headerText="Id" sortBy="#{sensorStation.id}">
                                    <h:outputText value="#{sensorStation.id}" />
                                </p:column>

                                <p:column headerText="Plant" sortBy="#{sensorStation.createDate}">
                                    <h:outputText value="#{sensorStation.createDate}" />
                                </p:column>

                                <p:column headerText="Date" sortBy="#{sensorStation.createDate}">
                                    <h:outputText value="#{sensorStation.createDate}" />
                                </p:column>

                                <p:column headerText="Location" sortBy="#{sensorStation.location}">
                                    <h:outputText value="#{sensorStation.location}">
                                        <f:convertNumber currencySymbol="$" type="currency" />
                                    </h:outputText>
                                </p:column>

                                <p:column headerText="Status" sortBy="#{order.status}">
                                    <span class="order-badge order-#{order.status.name().toLowerCase()}">#{order.status}</span>
                                </p:column>

                                <p:column style="width: 3.5rem">

                                    <!-- DetailView page Button -->
                                    <p:button icon="pi pi-search"
                                              title="open Detail-View"
                                              href="/greenHouseDetails.xhtml?id=#{sensorStation.id}" />

                                </p:column>
                            </p:dataTable>
                        </div>
                    </div>
                </div>





                <!-- ..........................................OUTER FRAME LOG SYSTEM MESSAGES AND LOGS ................:::::::::::::::........ -->
                <div class="col-12 md:col-12 xl:col-8">
                    <div class="grid">

                        <!-- ..........................................SYSTEM MESSAGES................................................. -->
                        <div class="col-12 md:col-6">
                            <div class="card feedbacks">
                                <div class="card-header">
                                    <h5>System Messages</h5>
                                    <div class="rating">
                                        <p:rating value="4" readonly="true"/>
                                        <span>4.0</span>
                                    </div>

                                </div>
                                <div class="feedbacks-list">
                                    <div class="feedback">
                                        <p:graphicImage name="images/dashboard/avatar-1.png" library="demo" />
                                        <div class="feedback-content">
                                            <div class="feedback-header">
                                                <h6>Tamas Bunce</h6>
                                                <p:rating value="5" readonly="true"/>
                                                <span>12h ago</span>
                                            </div>
                                            <span>The analysis of satellite data has revealed the loss of ice in just a few months of abnormally high…</span>
                                        </div>
                                    </div>
                                    <div class="feedback">
                                        <p:graphicImage name="images/dashboard/avatar-1.png" library="demo" />
                                        <div class="feedback-content">
                                            <div class="feedback-header">
                                                <h6>Tamas Bunce</h6>
                                                <p:rating value="5" readonly="true"/>
                                                <span>12h ago</span>
                                            </div>
                                            <span>The analysis of satellite data has revealed the loss of ice in just a few months of abnormally high…</span>
                                        </div>
                                    </div>
                                    <div class="feedback">
                                        <p:graphicImage name="images/dashboard/avatar-2.png" library="demo" />
                                        <div class="feedback-content">
                                            <div class="feedback-header">
                                                <h6>Olivia Arribas</h6>
                                                <p:rating value="4" readonly="true"/>
                                                <span>1d ago</span>
                                            </div>
                                            <span>The analysis of satellite data has revealed the loss of ice in just a few months of abnormally high…</span>
                                        </div>
                                    </div>
                                    <div class="feedback">
                                        <p:graphicImage name="images/dashboard/avatar-3.png" library="demo" />
                                        <div class="fesedback-content">
                                            <div class="feedback-header">
                                                <h6>Naomí Yepes</h6>
                                                <p:rating value="4"  readonly="true"/>
                                                <span>1w ago</span>
                                            </div>
                                            <span>The analysis of satellite data has revealed the loss of ice in just a few months of abnormally high…</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <!-- ..........................................AUDIT LOG FRAME .............................................................. -->
                        <div class="col-12 md:col-6">
                            <div class="card status">
                                <h5>Audit Logs</h5>
                                <div class="status-content">



                                    <!-- ..........................................AUDIT LOG PREVIEW .................................... -->
                                        <div class="card">
                                                <p:dataTable id="latestlogs" var="log" value="#{logListController.latestlogs}" selectionMode="single" reflow="true" paginatorPosition="bottom"
                                                             rowKey="#{log.id}" paginator="true" rows="5" sortBy="#{log.id}" sortOrder="descending" >
                                                    <p:column >
                                                        <h:outputText value="#{log.id}" />
                                                    </p:column>
                                                    <p:column >
                                                        <h:outputText value="#{log.text}" />
                                                    </p:column>
                                                </p:dataTable>
                                        </div>


                                    <!-- ..........................................LOG CATEGORIES .................................... -->
                                    <div class="status-info">
                                        <h6>Logs</h6>
                                        <ul>
                                            <li>
                                                <div class="status">
                                                    <span ><i class="pi pi-circle-on"></i> Error</span>
                                                    <span>
                                                        <h:outputText value="#{logListController.logsAmount}" />
                                                    </span>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="status">
                                                    <span ><i class="pi pi-circle-on"></i> Warning</span>
                                                    <span >
                                                        <h:outputText value="#{logListController.logsAmount}" />
                                                    </span>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="status">
                                                    <span ><i class="pi pi-circle-on"></i> Success</span>
                                                    <span >
                                                        <h:outputText value="#{logListController.logsAmount}" />
                                                    </span>
                                                </div>
                                            </li>
                                        </ul>
                                    </div><!-- .................LOG CATEGORIES END............. -->

                                </div>
                            </div>
                        </div><!-- .......AUDIT LOG FRAME END............ -->


                    </div>
                </div><!-- ................ END OF OUTER FRAME SYSTEM MESSAGES AND LOGS ............-->


                <!-- ..........................................EXTRA FRAME................................................................... -->
                <div class="col-12 md:col-6 xl:col-4">
                    <div class="card sales">
                        <div class="card-header">
                            <h5>ACCESS POINTS</h5>
                            <div class="header-buttons">
                                <p:commandButton type="button" icon="pi pi-search" styleClass="ui-button-secondary outlined-button mr-2" />
                            </div>
                        </div>
                        <p:graphicImage name="images/dashboard/asset-worldmap.png" library="demo" />
                        <div class="progress-item">
                            <div class="progress-title">
                                <span >United States of America</span>
                                <span >5K/10K</span>
                            </div>

                            <div class="progress-bar">
                                <span class="progress"></span>
                                <span class="progress-bar-background"></span>
                            </div>
                        </div>
                        <div class="progress-item">
                            <div class="progress-title">
                                <span >France</span>
                                <span >2K/6K</span>
                            </div>

                            <div class="progress-bar">
                                <span class="progress"></span>
                                <span class="progress-bar-background"></span>
                            </div>
                        </div>
                        <div class="progress-item">
                            <div class="progress-title">
                                <span >Japan</span>
                                <span >4K/9K</span>
                            </div>

                            <div class="progress-bar">
                                <span class="progress"></span>
                                <span class="progress-bar-background"></span>
                            </div>
                        </div>
                    </div>
                </div>






                <!-- ..........................................USERS TABLE................................................................... -->
                <div class="col-12 md:col-12 xl:col-8">
                    <div class="card transactions">
                        <div class="card-header">
                            <h5>Users</h5>
                            <div class="header-buttons">
                                <p:commandButton type="button" icon="pi pi-search" styleClass="ui-button-secondary outlined-button  mr-2"/>
                                <p:commandButton type="button" icon="pi pi-ellipsis-v"  styleClass="ui-button-secondary outlined-button " />
                            </div>
                        </div>
                        <h:form id="form">
                            <p:dataTable  widgetVar="customersDT" var="user" value="#{userListController.users}" reflow="true" rowKey="#{user.id}"
                                          rows="10" scrollable="true" scrollHeight="500">
                                <f:facet name="header">
                                    <style type="text/css">
                                        .table-no-select-all .ui-chkbox-all {
                                            display: none !important;
                                        }

                                    </style>
                                    <div class="customers-table-header">
                                        <span style="font-weight: bold">Greenhouses</span>

                                        <span class="ui-input-icon-left filter-container">
                                        <i class="pi pi-search"/>
                                        <p:inputText id="globalFilter" onkeyup="PF('customersDT').filter()" placeholder="Global Search"/>
                                    </span>
                                    </div>
                                </f:facet>
                                <p:column headerText="Username" sortBy="#{user.username}" filterBy="#{user.username}">
                                    <h:outputText value="#{user.username}" />
                                </p:column>
                                <p:column headerText="First Name" sortBy="#{user.firstName}" filterBy="#{user.firstName}">
                                    <span class="flag flag-#{customer.country.code}" style="width: 30px; height: 20px"/>
                                    <h:outputText style="vertical-align: middle; margin-left: .5rem" value="#{user.firstName}" />
                                </p:column>
                                <p:column headerText="Last Name" sortBy="#{user.lastName}" filterBy="#{user.lastName}">
                                    <p:graphicImage name="images/avatar/#{customer.representative.image}" width="32" style="vertical-align: middle" />
                                    <h:outputText style="vertical-align: middle; margin-left: .5rem" value="#{user.lastName}" />
                                </p:column>
                                <p:column headerText="Join Date" sortBy="#{user.createDate}" filterBy="#{user.createDate}">
                                    <h:outputText value="#{user.createDate}" />
                                </p:column>
                                <p:column headerText="Roles" sortBy="#{customer.status}" filterBy="#{customer.status}">
                                    <span class="customer-badge status-#{customer.status.name().toLowerCase()}">#{customer.status}</span>
                                </p:column>
                                <p:column headerText="Enabled" sortBy="#{user.enabled}">
                                    <h:outputText value="#{user.enabled}" />
                                </p:column>
                                <p:column style="width: 8rem; text-align: center;">
                                    <p:button icon="pi pi-cog" styleClass="ui-button-secondary" />
                                </p:column>
                            </p:dataTable>
                        </h:form>
                    </div>
                </div>





            </div>
        </div>
    </ui:define>
</ui:composition>