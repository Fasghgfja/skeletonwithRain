<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                template="/WEB-INF/templates/main.xhtml">

    <ui:define name="title">Dashboard</ui:define>
    <ui:define name="head">
        <link rel="stylesheet" href="/webjars/font-awesome/6.4.0/css/all.min.css"/>
       </ui:define>


       <ui:define name="content">
           <div class="layout-dashboard">
               <div class="grid">



                   <c:if test="#{sessionInfoBean.hasRole('ADMIN') }">
                       <!-- ................TOP INFO BOXES.......... -->
                    <!-- ...........USERS SIGNED UP............ -->

                    <div class="col-12 md:col-6 xl:col-3">
                        <div class="card  overview-box">
                            <p:graphicImage url="../resources/images/dashboard/effect-useronline.svg"/>
                            <span class="overview-icon">
                                <p:graphicImage url="../resources/images/dashboard/icon-usersonline.png"/>
                            </span>
                            <div class="overview">
                                <span class="overview-title">USERS SIGNED UP</span>
                                <h3>
                                    <h:outputText value="#{userListController.usersAmount}"/>
                                </h3>
                            </div>
                        </div>
                    </div>

                    <!-- .............ACCESS POINTS........... -->

                    <div class="col-12 md:col-6 xl:col-3">
                        <div class="card overview-box">
                            <p:graphicImage url="../resources/images/dashboard/effect-checkins.svg"/>
                            <span class="overview-icon">
                                <p:graphicImage url="../resources/images/dashboard/icon-checkins.png"/>
                            </span>
                            <div class="overview">
                                <span class="overview-title">ACCESS POINTS</span>
                                <h3>

                                </h3>
                            </div>
                        </div>
                    </div>

                    <!-- ..............PLANTS UNDER CARE.............. -->

                    <div class="col-12 md:col-6 xl:col-3">
                        <div class="card overview-box ">
                            <p:graphicImage url="../resources/images/dashboard/effect-filessynced.svg"/>
                            <span class="overview-icon">
                                <p:graphicImage url="../resources/images/plants.png"/>
                            </span>
                            <div class="overview">
                                <span class="overview-title">PLANTS UNDER CARE</span>
                                <h3>

                                </h3>
                            </div>
                        </div>
                    </div>

                    <!-- .............MEASUREMENTS............... -->

                    <div class="col-12 md:col-6 xl:col-3">
                        <div class="card overview-box">
                            <p:graphicImage url="../resources/images/dashboard/effect-messages.svg"/>
                            <span class="overview-icon">
                                <p:graphicImage url="../resources/images/dashboard/measurements.png"/>
                            </span>
                            <div class="overview">
                                <span class="overview-title">MEASUREMENTS</span>
                                <h3>

                                </h3>
                            </div>
                        </div>
                    </div>

                </c:if>






                <!-- ....................................ADMIN VIEW START................................... -->
                <c:if test="#{sessionInfoBean.hasRole('ADMIN')}">

                    <!-- ..........GRAPH................ -->
                    <div class="col-12 md:col-12 xl:col-6">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h:outputLink style="color: #3C9462" value="/admin/userManagement.xhtml">
                                        <h5>Users</h5>
                                    </h:outputLink>
                                    <div class="header-buttons">
                                        <!-- ........................Help Button ....................... -->
                                        <p:commandButton type="button" icon="fa fa-duotone fa-seedling" title="Help"
                                                         styleClass="ui-button-secondary outlined-button"
                                                         onclick="PF('adminHelpDialog').show()"/>
                                    </div>
                                </div>
                                <p:dataTable id="usersTable1" widgetVar="usersTable" var="user" value="#{userListController.userxList}"
                                             reflow="true" styleClass="products-table" rowKey="#{user.username}" paginator="true"
                                             rows="10" rowSelectMode="add" paginatorPosition="bottom">
                                    <p:column headerText="Username" sortBy="#{user.username}" filterBy="#{user.username}">
                                        <h:outputText value="#{user.username}"/>
                                    </p:column>
                                    <p:column headerText="First Name" sortBy="#{user.firstName}" filterBy="#{user.firstName}">
                                        <h:outputText value="#{user.firstName}"/>
                                    </p:column>
                                    <p:column headerText="Last Name" sortBy="#{user.lastName}" filterBy="#{user.lastName}">
                                        <h:outputText value="#{user.lastName}"/>
                                    </p:column>
                                    <p:column headerText="Email" sortBy="#{user.email}" filterBy="#{user.email}">
                                        <h:outputText value="#{user.email}"/>
                                    </p:column>
                                    <p:column headerText="Phone number" sortBy="#{user.phone}" filterBy="#{user.phone}">
                                        <h:outputText value="#{user.phone}"/>
                                    </p:column>
                                    <p:column headerText="Roles" sortBy="#{user.roles}">
                                        <h:outputText value="#{user.roles}"/>
                                    </p:column>
                                    <p:column headerText="Registration Date" sortBy="#{user.createDate}" filterBy="#{user.createDate}">
                                        <h:outputText value="#{user.createDate}"/>
                                    </p:column>
                                    <p:column headerText="Interactions">



                                    </p:column>
                                </p:dataTable>





                                <!-- .......::::::::::::::::::.............CONFIRMATION DIALOG........... ....::::::::::::.......... -->
                                <p:confirmDialog global="true" showEffect="fade" hideEffect="fade" width="300">
                                    <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="pi pi-check"/>
                                    <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="pi pi-times"/>
                                </p:confirmDialog>


                            </div>
                        </div>
                    </div>

                <!-- ..........GREENHOUSES PREVIEW........... -->
                    <div class="col-12 md:col-12 xl:col-6">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                <h:outputLink style="color: #3C9462" value="/admin/userManagement.xhtml">
                                    <h5>Users</h5>
                                </h:outputLink>
                                <div class="header-buttons">
                                    <!-- ........................Help Button ....................... -->
                                    <p:commandButton type="button" icon="fa fa-duotone fa-seedling" title="Help"
                                                     styleClass="ui-button-secondary outlined-button"
                                                     onclick="PF('adminHelpDialog').show()"/>
                                </div>
                                </div>
                                <p:dataTable id="usersTable" widgetVar="usersTable" var="user" value="#{userListController.userxList}"
                                             reflow="true" styleClass="products-table" rowKey="#{user.username}" paginator="true"
                                             rows="10" rowSelectMode="add" paginatorPosition="bottom">
                                    <p:column headerText="Username" sortBy="#{user.username}" filterBy="#{user.username}">
                                        <h:outputText value="#{user.username}"/>
                                    </p:column>
                                    <p:column headerText="First Name" sortBy="#{user.firstName}" filterBy="#{user.firstName}">
                                        <h:outputText value="#{user.firstName}"/>
                                    </p:column>
                                    <p:column headerText="Last Name" sortBy="#{user.lastName}" filterBy="#{user.lastName}">
                                        <h:outputText value="#{user.lastName}"/>
                                    </p:column>
                                    <p:column headerText="Email" sortBy="#{user.email}" filterBy="#{user.email}">
                                        <h:outputText value="#{user.email}"/>
                                    </p:column>
                                    <p:column headerText="Phone number" sortBy="#{user.phone}" filterBy="#{user.phone}">
                                        <h:outputText value="#{user.phone}"/>
                                    </p:column>
                                    <p:column headerText="Roles" sortBy="#{user.roles}">
                                        <h:outputText value="#{user.roles}"/>
                                    </p:column>
                                    <p:column headerText="Registration Date" sortBy="#{user.createDate}" filterBy="#{user.createDate}">
                                        <h:outputText value="#{user.createDate}"/>
                                    </p:column>
                                    <p:column headerText="Interactions">



                                    </p:column>
                                </p:dataTable>





                                <!-- .......::::::::::::::::::.............CONFIRMATION DIALOG........... ....::::::::::::.......... -->
                                <p:confirmDialog global="true" showEffect="fade" hideEffect="fade" width="300">
                                    <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="pi pi-check"/>
                                    <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="pi pi-times"/>
                                </p:confirmDialog>


                            </div>
                        </div>
                    </div>
                </c:if>
                <!-- ....................................ADMIN VIEW FINISH................................... -->





                <!-- ....................................USER VIEW .....working sort and search............ -->
                <h:form id="userForm">
                    <div class="col-12">
                        <div class="card">

                            <div class="card-header">
                                <h:outputLink style="color: #3C9462" value="/admin/userManagement.xhtml">
                                    <h5>Users (working sort and search)</h5>
                                </h:outputLink>
                                <div class="header-buttons">
                                    <!-- ........................Help Button ....................... -->
                                    <p:commandButton type="button" icon="fa fa-duotone fa-seedling" title="Help"
                                                 styleClass="ui-button-secondary outlined-button"
                                                 onclick="PF('userDhelpDialog').show()"/>
                                </div>
                            </div>

                            <p:dataTable id="usersTable3" widgetVar="usersTable" var="user" value="#{userListController.userxList}"
                                         reflow="true" styleClass="products-table" rowKey="#{user.username}" paginator="true"
                                         rows="10" rowSelectMode="add" paginatorPosition="bottom">
                                <p:column headerText="Username" sortBy="#{user.username}" filterBy="#{user.username}">
                                    <h:outputText value="#{user.username}"/>
                                </p:column>
                                <p:column headerText="First Name" sortBy="#{user.firstName}" filterBy="#{user.firstName}">
                                    <h:outputText value="#{user.firstName}"/>
                                </p:column>
                                <p:column headerText="Last Name" sortBy="#{user.lastName}" filterBy="#{user.lastName}">
                                    <h:outputText value="#{user.lastName}"/>
                                </p:column>
                                <p:column headerText="Email" sortBy="#{user.email}" filterBy="#{user.email}">
                                    <h:outputText value="#{user.email}"/>
                                </p:column>
                                <p:column headerText="Phone number" sortBy="#{user.phone}" filterBy="#{user.phone}">
                                    <h:outputText value="#{user.phone}"/>
                                </p:column>
                                <p:column headerText="Roles" sortBy="#{user.roles}">
                                    <h:outputText value="#{user.roles}"/>
                                </p:column>
                                <p:column headerText="Registration Date" sortBy="#{user.createDate}" filterBy="#{user.createDate}">
                                    <h:outputText value="#{user.createDate}"/>
                                </p:column>
                                <p:column headerText="Interactions">



                                </p:column>
                            </p:dataTable>



                        </div>
                    </div>
                </h:form>
                <!--.......................................................USER VIEW FINISH.........................................-->








                <!--.......................................................ADMIN LOG.........................................-->
                <c:if test="#{sessionInfoBean.hasRole('ADMIN')}">
                    <!-- ..........OUTER FRAME LOG SYSTEM MESSAGES AND LOGS .............. -->
                    <div class="col-12">
                        <div class="grid">

                            <!-- ...........AUDIT LOG FRAME ........... -->
                            <div >
                                <div class="card status">
                                    <h:outputLink value="/admin/auditLog.xhtml">
                                        <h5 style="text-align: center; color: #3C9462;">Audit Logs</h5>
                                    </h:outputLink>

                                    <div class="status-content">

                                        <!-- .......AUDIT LOG PREVIEW ....... -->
                                        <div class="card">
                                            <p:dataTable id="logs" var="log" value="#{logController.latestLogs}"
                                                         reflow="true" paginatorPosition="bottom"
                                                         rowKey="#{log.id}" paginator="true" rows="10" sortBy="#{log.id}"
                                                         sortOrder="descending">
                                                <p:column>
                                                    <h:outputText value="#{log.type}"
                                                                  style="color:#{log.type == 'ERROR' ? 'red' : log.type == 'WARNING' ? 'orange' : 'green'};"/>
                                                </p:column>
                                                <p:column>
                                                    <h:outputText value="#{log.time}"/>
                                                </p:column>
                                                <p:column>
                                                    <h:outputText value="#{log.text}"/>
                                                </p:column>
                                            </p:dataTable>
                                        </div>

                                        <!-- .............LOG CATEGORIES ......... -->
                                        <div class="status-info">
                                            <h6>Logs</h6>
                                            <ul>
                                                <li>
                                                    <div class="status">
                                                        <span><em class="pi pi-info"></em> Total Amount</span>
                                                        <span>
                                                            <h:outputText value="#{logController.logsAmount}"/>
                                                        </span>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="status">
                                                        <span><em class="pi pi-circle-on"
                                                                 style="color: red"></em> Error</span>
                                                        <span>
                                                            <h:outputText value="#{logController.errorLogsAmount}"/>
                                                        </span>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="status">
                                                        <span><em class="pi pi-circle-on" style="color: orange"></em> Warning</span>
                                                        <span>
                                                            <h:outputText value="#{logController.warningLogsAmount}"/>
                                                        </span>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="status">
                                                        <span><em class="pi pi-circle-on"
                                                                 style="color: green"></em> Success</span>
                                                        <span>
                                                            <h:outputText value="#{logController.successLogsAmount}"/>
                                                        </span>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div><!-- ......LOG CATEGORIES END..... -->

                                    </div>
                                </div>
                            </div><!-- .......AUDIT LOG FRAME END....... -->


                        </div>
                    </div><!-- ..END OF OUTER FRAME SYSTEM MESSAGES AND LOGS .......-->
                </c:if>
                <!--.....................................................ADMIN LOG FINISHED............................................-->



            </div>
        </div>




        <!-- ....................................... HELP DIALOGS............................................................................ -->

        <!-- ...................................UserDashboard help dialog............................. -->
        <p:dialog header="User Dashboard Help" id="userDhelpDialog" widgetVar="userDhelpDialog"
                  modal="true"
                  showEffect="fade" hideEffect="fade" resizable="false">
            <p:outputPanel id="UserDhelpDialog">
                <h6>Title:</h6>
                text text text text text text text text text text text text text text text text text text text text text text text text text text text.
                <h6>Title2:</h6>
                text text text text text text text text text text text text text text text text text text text text text text text text text text text.
                <h6>Title3:</h6>
                text text text text text text text text text text text text text text text text text text text text text text text text text text text.
            </p:outputPanel>
        </p:dialog>


        <!-- ...................................Admin Dashboard help dialog............................. -->
        <p:dialog header="Administrator Dashboard Help" id="adminHelpDialog" widgetVar="adminHelpDialog"
                  modal="true"
                  showEffect="fade" hideEffect="fade" resizable="false">
            <p:outputPanel id="AdminHelpDialog">
                <h6>Title:</h6>
                text text text text text text text text text text text text text text text text text text text text text text text text text text text.
                <h6>Title2:</h6>
                text text text text text text text text text text text text text text text text text text text text text text text text text text text.
            </p:outputPanel>
        </p:dialog>


        <!-- ...................................Extra help dialog............................. -->
        <p:dialog header="Administrator Graph Help" id="extraHelpDialog" widgetVar="extraHelpDialog"
                  modal="true"
                  showEffect="fade" hideEffect="fade" resizable="false">
            <p:outputPanel id="ExtraHelpDialog">
                <h4>Title:</h4>
                text text text text text text text text text text text text text text text text text text text text text text text text text text text.
                <h5>Notes:</h5>
                text text text text text text text text text text text text text text text text text text text text text text text text text text text. <br></br>
                text text text text text text text text text text text text text text text text text text text text text text text text text text text.
            </p:outputPanel>
        </p:dialog>


    </ui:define>
</ui:composition>